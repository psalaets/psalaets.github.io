<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="description" content="Some things to check when your sourcemaps are bad."><link rel="stylesheet" href="/1.7.0/main.css"><link rel="canonical" href="https://paulsalaets.com/"><title>Failed to parse SourceMap | paulsalaets.com</title></head><body class="font-base font-sans text-gray-900"><header class="p-4 sm:p-8"><a href="#main" class="skipnav">skip to main content</a><nav><a class="font-bold text-sm sm:text-base inline-block mr-4" href="/" title="Home">Paul Salaets </a><a class="text-sm sm:text-base inline-block mr-4" href="/" title="Home">Home </a><a class="text-sm sm:text-base inline-block mr-4" href="/about" title="About">About </a><a class="text-sm sm:text-base inline-block mr-4" href="/archive" title="Archive">Archive</a></nav></header><main id="main" class="pb-4"><div class="mx-auto bg-white p-4 sm:max-w-3xl sm:px-16"><article><header class="mb-8"><h1 class="text-3xl font-bold">Failed to parse SourceMap</h1><span class="text-sm">19 Mar 2016</span></header><section class="post-content"><p>After upgrading to Chrome 49 I noticed a message in the devtools console saying it couldn't parse my sourcemaps. Here are some things to check when your sourcemaps are bad.</p><h2>Is the sourcemap served with correct headers?</h2><h3>Content-Encoding</h3><p>If the sourcemap is gzipped, it needs a proper <code>Content-Encoding</code> response header so the browser can handle it:</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">Content-Encoding: <span class="token function">gzip</span></span></code></pre><p>I couldn't get Chrome devtools to show the sourcemap response headers so I downloaded the sourcemap directly in Firefox and checked the devtools there.</p><h3>Detecting if sourcemap is gzipped</h3><p>Download the sourcemap and run</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">$ <span class="token function">head</span> -c 2 <span class="token operator">&lt;</span>sourcemap<span class="token operator">></span> <span class="token operator">|</span> hexdump -ve <span class="token string">'1/1 "%02x" "\n"'</span></span></code></pre><p>If this prints</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">1f</span><br><span class="highlight-line">8b</span></code></pre><p>which is the <a href="https://en.wikipedia.org/wiki/Gzip#File_format">gzip magic number</a>, the sourcemap is gzipped.</p><p><strong>Or just look at the sourcemap contents</strong></p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">$ <span class="token function">more</span> <span class="token operator">&lt;</span>sourcemap<span class="token operator">></span></span></code></pre><p>If it looks like binary data, it's probably gzipped. If it looks like json, it isn't.</p><h3>What about Content-Type?</h3><p>The <code>Content-Type</code> of sourcemaps <a href="http://stackoverflow.com/q/19911929">doesn't matter</a>. Seems like browser devtools know they're getting a sourcemap when downloading from a url specified by <code>sourceMappingURL</code>.</p><h2>Is the sourcemap valid?</h2><p>Sourcemaps are json so make sure it's valid json and not just an empty object.</p><p>Next step is reading the docs of whatever tool the sourcemap was generated by and double checking your usage of it.</p></section></article></div></main><footer class="p-8 text-center text-sm border-t-2 border-gray-200"><span>Â©2019 Paul Salaets</span><br><span>Built with <a href="https://www.11ty.io/" rel="noopener noreferrer" class="text-blue-700 underline">Eleventy</a> and <a href="https://tailwindcss.com/" rel="noopener noreferrer" class="text-blue-700 underline">Tailwind CSS</a></span></footer></body></html>