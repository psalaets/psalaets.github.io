<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="description" content="Sometimes you do not want to run your entire Mocha test suite. Here are five ways to do it."><link rel="stylesheet" href="/1.6.0/main.css"><link rel="canonical" href="https://paulsalaets.com/"><title>Running subsets of Mocha test suites | paulsalaets.com</title></head><body class="font-base font-sans text-gray-900"><header class="p-4 sm:p-8"><a href="#main" class="skipnav">skip to main content</a><nav><a class="font-bold text-sm sm:text-base inline-block mr-4" href="/" title="Home">Paul Salaets </a><a class="text-sm sm:text-base inline-block mr-4" href="/" title="Home">Home </a><a class="text-sm sm:text-base inline-block mr-4" href="/about" title="About">About </a><a class="text-sm sm:text-base inline-block mr-4" href="/archive" title="Archive">Archive</a></nav></header><main id="main" class="pb-4"><div class="mx-auto bg-white p-4 sm:max-w-3xl sm:px-16"><article><header class="mb-8"><h1 class="text-3xl font-bold">Running subsets of Mocha test suites</h1><span class="text-sm">3 Feb 2015</span></header><section class="post-content"><p>Sometimes you don't want to run your entire test suite. Here are five ways to do it.</p><h3>Versions used below</h3><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token string">"mocha"</span><span class="token punctuation">:</span> <span class="token string">"2.1.0"</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><h2>1. File pattern</h2><p>This is an easy but coarse-grained way to control what gets run. It may be all you need depending on how your tests are divided up.</p><p>You can run specific test files</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">$ mocha test/login-required.js</span></code></pre><p>When not given a pattern, Mocha runs <code>./test/*.js</code>.</p><h2>2. grep</h2><p>Passing <code>--grep &lt;pattern&gt;</code> on the command line will run tests and suites with names matching the pattern.</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">$ mocha --grep auth</span></code></pre><h2>3. grep with invert</h2><p>Adding <code>--invert</code> to a command line with <code>--grep &lt;pattern&gt;</code> runs tests and suites with names that <em>do not</em> match the pattern.</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">$ mocha --grep auth --invert</span></code></pre><h2>4. only</h2><p>Chain an <code>it</code> with <code>.only()</code>. Mocha will only run the test with the <code>.only()</code>.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">"using only"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  it<span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token string">"this is the only test to be run"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"this is not run"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><h3>describe blocks</h3><p>You can also chain <code>.only()</code> on a <code>describe</code> block to run that block exclusively.</p><h3>Gotcha</h3><p><code>.only()</code> is implemented using the grep option. Similar naming could cause extra tests to run (<a href="https://github.com/mochajs/mocha/issues/1481">issue 1481</a>).</p><h2>5. skip</h2><p>This is like the reverse of <code>.only()</code>. Mocha will run all tests <em>except</em> the ones with <code>.skip()</code>.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">"using skip"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  it<span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token string">"this is not run"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"this runs"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"this runs too"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><h3>describe blocks</h3><p>You can also chain <code>.skip()</code> on <code>describe</code> blocks to ignore the block.</p><h2>6. tagging (unreleased as of Mocha 2.1.0)</h2><p>A new <a href="https://github.com/mochajs/mocha/pull/1445">tagging api</a> could be coming to Mocha. This seems like it'd trump all other methods of test filtering.</p></section></article></div></main><footer class="p-8 text-center text-sm border-t-2 border-gray-200"><span>Â©2019 Paul Salaets</span><br><span>Built with <a href="https://www.11ty.io/" rel="noopener noreferrer" class="text-blue-700 underline">Eleventy</a> and <a href="https://tailwindcss.com/" rel="noopener noreferrer" class="text-blue-700 underline">Tailwind CSS</a></span></footer></body></html>