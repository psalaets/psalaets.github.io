<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="description" content="How to make a static JSON API using GitHub Pages"><link rel="stylesheet" href="/1.6.0/main.css"><link rel="canonical" href="https://paulsalaets.com/"><title>Making a JSON API with GitHub Pages | paulsalaets.com</title></head><body class="font-base font-sans text-gray-900"><header class="p-4 sm:p-8"><a href="#main" class="skipnav">skip to main content</a><nav><a class="font-bold text-sm sm:text-base inline-block mr-4" href="/" title="Home">Paul Salaets </a><a class="text-sm sm:text-base inline-block mr-4" href="/" title="Home">Home </a><a class="text-sm sm:text-base inline-block mr-4" href="/about" title="About">About </a><a class="text-sm sm:text-base inline-block mr-4" href="/archive" title="Archive">Archive</a></nav></header><main id="main" class="pb-4"><div class="mx-auto bg-white p-4 sm:max-w-3xl sm:px-16"><article><header class="mb-8"><h1 class="text-3xl font-bold">Making a JSON API with GitHub Pages</h1><span class="text-sm">30 Nov 2016</span></header><section class="post-content"><p>GitHub Pages is an easy, free way to make data available through an API.</p><h2>What is GitHub Pages?</h2><p>Any repo, user and organization on GitHub can have its own static website hosted by GitHub for free.</p><p>Many projects use it to host documentation websites but it can host <em>any</em> kind of content. Instead of hosting html, you can host JSON files.</p><h3>Enable it</h3><ol><li>Go to the home page of a repo you have admin access to</li><li>Go to the &quot;Settings&quot; tab</li><li>Scroll down to the &quot;GitHub Pages&quot; section</li><li>Set &quot;Source&quot; to &quot;master branch&quot;</li></ol><p>Wait a few seconds and then go to <code>https://&lt;username&gt;.github.io/&lt;repo name&gt;</code>. Any files on the master branch in the repo are now served at that url.</p><h3>CORS header</h3><p>GitHub graciously includes a wildcarded <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin">CORS header</a> in the responses.</p><p>This is key because now any webapp can pull data directly from the API. No backend servers are needed.</p><h2>Url and routes</h2><p>The &quot;base&quot; url is made from your GitHub username (or organization name) and the repo name:</p><p><code>https://&lt;username or org name&gt;.github.io/&lt;repo name&gt;</code></p><p>Any url path after that is determined by directory structure of the repo.</p><p>A repo called &quot;restaurant&quot; with this directory structure</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">└── locations</span><br><span class="highlight-line">    ├── los-angeles</span><br><span class="highlight-line">    │   └── menu.json</span><br><span class="highlight-line">    └── new-york</span><br><span class="highlight-line">        └── menu.json</span></code></pre><p>will have these routes</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">https://<span class="token operator">&lt;</span>username<span class="token operator">></span>.github.io/restaurant/locations/los-angeles/menu.json</span><br><span class="highlight-line">https://<span class="token operator">&lt;</span>username<span class="token operator">></span>.github.io/restaurant/locations/new-york/menu.json</span></code></pre><h2>What datasets?</h2><p>This kind of API is best suited for datasets that are read-only and mostly static.</p><p>The API is updated by <code>git push</code> so highly dynamic data like stock prices would be difficult. Routes that appear to have ids in them are really just directories or files, so all of the data must be known ahead of time.</p><h2>Handling 404s</h2><p>When a non-existent route is accessed, GitHub serves <code>404.html</code>, if it exists at the root of the repo. Otherwise it serves a default 404 page. Sending html is not ideal for a JSON API but the response status code is probably the most important thing for clients, and that is set correctly.</p><p>I make my <code>404.html</code> look like</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">404 Not Found</span><br><span class="highlight-line"></span><br><span class="highlight-line">Please see <span class="token operator">&lt;</span>url to API docs<span class="token operator">></span></span></code></pre><p>Maybe that will help a confused developer figure out what they're doing wrong.</p><h2>Client</h2><p>A really basic browser client for an API like this could be</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">hitApi</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">var</span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  req<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> onLoad<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  req<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> onFail<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  req<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'abort'</span><span class="token punctuation">,</span> onFail<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  req<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  req<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">function</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token function">onFail</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">var</span> json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> json<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">function</span> <span class="token function">onFail</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>with usage</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token function">hitApi</span><span class="token punctuation">(</span><span class="token string">'url here'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'there was an error'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'data is'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></section></article></div></main><footer class="p-8 text-center text-sm border-t-2 border-gray-200"><span>©2019 Paul Salaets</span><br><span>Built with <a href="https://www.11ty.io/" rel="noopener noreferrer" class="text-blue-700 underline">Eleventy</a> and <a href="https://tailwindcss.com/" rel="noopener noreferrer" class="text-blue-700 underline">Tailwind CSS</a></span></footer></body></html>