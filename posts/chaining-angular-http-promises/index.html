<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="description" content="The success() and error() methods on promises returned by the Angular $http service do not chain like then()"><link rel="stylesheet" href="/styles/1.40.0/index.css"><link rel="canonical" href="https://paulsalaets.com/"><link rel="alternate" type="application/rss+xml" title="Subscribe to posts" href="/feed.xml"><title>Chaining Angular $http promises | paulsalaets.com</title></head><body class="text-base font-sans text-gray-900"><header class="p-4 mx-auto sm:max-w-3xl sm:px-20"><a href="#main" class="skipnav">skip to main content</a><nav><div class="w-full text-center mb-2 md:mb-0 md:inline-block md:w-auto md:text-left"><a class="font-bold inline-block mr-3" href="/" title="Home">Paul Salaets</a></div><div class="w-full text-center md:inline-block md:w-auto md:text-left"><a class="px-3 py-2" href="/" title="Home"><span class="inline-block border-b-4 border-white">Home</span> </a><a class="px-3 py-2" href="/about/" title="About"><span class="inline-block border-b-4 border-white">About</span> </a><a class="px-3 py-2" href="/archive/" title="Archive"><span class="inline-block border-b-4 border-white">Archive</span></a></div></nav></header><main id="main" class="pb-4"><div class="mx-auto bg-white p-4 sm:max-w-3xl sm:px-20"><article><header class="mb-8"><h1 class="text-3xl font-bold">Chaining Angular $http promises</h1><span class="text-sm">3 Mar 2015</span></header><section class="post-content"><p>Angular adds <code>success()</code> and <code>error()</code> convenience methods to promises returned by <code>$http</code> but they don't work the same as <code>then()</code>.</p><p><strong>Versions used below</strong></p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token string">"angular"</span><span class="token punctuation">:</span> <span class="token string">"1.3.14"</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><h2>Chaining off of then()</h2><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token function">$http</span><span class="token punctuation">(</span>requestConfig<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>fn1<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span></span></code></pre><p>Once <code>fn1</code> has signaled it is done, <code>fn2</code> will run. Nothing new here, this is just promises chaining like you'd expect.</p><p>One thing to note is the response object is passed to fulfill handlers <em>and</em> reject handlers. This does not follow the convention of passing an <code>Error</code> to reject handlers.</p><h3>success() after then()</h3><p>This fails because the promise returned by <code>then()</code> is a plain old <code>$q</code> promise. It doesn't have the http-specific <code>success()</code> and <code>error()</code> helpers.</p><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token function">$http</span><span class="token punctuation">(</span>requestConfig<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>fn1<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span> <span class="token comment">// TypeError: undefined is not a function</span></span></code></pre><h2>Chaining off of success() and error()</h2><p>Taking a <a href="https://github.com/angular/angular.js/blob/v1.3.14/src/ng/http.js#L808" rel="noopener">peek at the code</a>, we see that <code>success()</code> and <code>error()</code> return the original http promise and not the promise generated by your callback. The callback's return value is ignored.</p><p>Chaining off of <code>success()</code> is possible but it does not work like chaining off of <code>then()</code>.</p><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token function">$http</span><span class="token punctuation">(</span>requestConfig<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>fn1<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span></span></code></pre><p><code>fn2</code> will not wait for <code>fn1</code> and they're essentially run in parallel.</p><h2>What do success() and error() provide?</h2><p>The <code>success()</code> and <code>error()</code> methods pass properties of the response object to their callback.</p><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token comment">// using success() or error()</span></span><br><span class="highlight-line"><span class="token function">$http</span><span class="token punctuation">(</span>requestConfig<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> status<span class="token punctuation">,</span> headers<span class="token punctuation">,</span> config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// using then()</span></span><br><span class="highlight-line"><span class="token function">$http</span><span class="token punctuation">(</span>requestConfig<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token comment">// response.data</span></span><br><span class="highlight-line">    <span class="token comment">// response.status</span></span><br><span class="highlight-line">    <span class="token comment">// response.headers</span></span><br><span class="highlight-line">    <span class="token comment">// response.config</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span></code></pre><p>You save a little typing and use slightly less generic names but I'm not sure it's worth the potential confusion.</p></section></article></div></main><footer class="p-8 text-center text-sm border-t-2 border-gray-200"><span>Â©2020 Paul Salaets</span><br><span>Built with <a href="https://www.11ty.io/" rel="noopener" class="text-blue-700 underline">Eleventy</a> and <a href="https://tailwindcss.com/" rel="noopener" class="text-blue-700 underline">Tailwind CSS</a></span></footer></body></html>