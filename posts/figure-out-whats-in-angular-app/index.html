<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="description" content="Introducing a tool to see what injectables are in an Angular app and what modules they are from."><link rel="stylesheet" href="/1.13.0/main.css"><link rel="canonical" href="https://paulsalaets.com/"><title>Figure out what&#39;s in an Angular app | paulsalaets.com</title></head><body class="text-base font-sans text-gray-900"><header class="p-4 mx-auto sm:max-w-3xl sm:px-20"><a href="#main" class="skipnav">skip to main content</a><nav><a class="font-bold text-sm sm:text-base inline-block mr-3" href="/" title="Home">Paul Salaets </a><a class="px-3 py-2" href="/" title="Home"><span class="text-sm sm:text-base inline-block">Home </span></a><a class="px-3 py-2" href="/about" title="About"><span class="text-sm sm:text-base inline-block">About </span></a><a class="px-3 py-2" href="/archive" title="Archive"><span class="text-sm sm:text-base inline-block">Archive</span></a></nav></header><main id="main" class="pb-4"><div class="mx-auto bg-white p-4 sm:max-w-3xl sm:px-20"><article><header class="mb-8"><h1 class="text-3xl font-bold">Figure out what&#39;s in an Angular app</h1><span class="text-sm">25 May 2015</span></header><section class="post-content"><p>When an Angular app gets big it can be time consuming to figure out what injectables are available and what modules they are from.</p><p><strong>Versions used below</strong></p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token string">"angular"</span><span class="token punctuation">:</span> <span class="token string">"^1.0.8"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token string">"ps-which"</span><span class="token punctuation">:</span> <span class="token string">"1.2.2"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token string">"gulp"</span><span class="token punctuation">:</span> <span class="token string">"3.8.11"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token string">"gulp-filter"</span><span class="token punctuation">:</span> <span class="token string">"2.0.2"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token string">"browserify"</span><span class="token punctuation">:</span> <span class="token string">"10.2.1"</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>How could you not know what's in your Angular app? It's <em>your</em> app.</p><p>Well, maybe you</p><ul><li>wake up one day and realize your app is a monolith</li><li>have inherited an app due to turnover in the development team</li><li>are the new developer on a project</li></ul><h2>Introducing ps-which</h2><p><a href="https://github.com/psalaets/ps-which">ps-which</a> is a tool that watches as things are defined in an Angular app. It can tell you which module a directive or service (or value or factory, etc) is from.</p><p>It can also list out types by module.</p><h2>See what module a type is from</h2><p>Let's say you have a directive <code>my-directive</code> in a template and want to know what module it's from.</p><p>Run</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line">psWhich<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span><span class="token string">'my-directive'</span><span class="token punctuation">)</span></span></code></pre><p>and it will respond</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token string">'directive in myModule'</span></span></code></pre><h2>List types by module</h2><p>ps-which can list out everything defined in an Angular app using a markdown format.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line">psWhich<span class="token punctuation">.</span><span class="token function">report</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span></code></pre><p>will print to console</p><pre class="language-text"><code class="language-text"><span class="highlight-line"># myModule</span><br><span class="highlight-line">## directive</span><br><span class="highlight-line">- myDirective</span><br><span class="highlight-line">- anotherDirective</span><br><span class="highlight-line">## value</span><br><span class="highlight-line">- someValue</span><br><span class="highlight-line"></span><br><span class="highlight-line"># myOtherModule</span><br><span class="highlight-line">## service</span><br><span class="highlight-line">- someService</span></code></pre><h3>Filtering report output</h3><p><code>psWhich.report()</code> accepts a <code>RegExp</code> to filter what modules are listed.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line">psWhich<span class="token punctuation">.</span><span class="token function">report</span><span class="token punctuation">(</span><span class="token regex">/^ui\.bootstrap/</span><span class="token punctuation">)</span></span></code></pre><h2>Keeping it out of production builds</h2><p>Since ps-which is a development helper you probably don't want it in your production build.</p><h3>gulp when using bower</h3><p>Filter ps-which out of the js file stream.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">var</span> filter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-filter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// then later in some task:</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">var</span> files <span class="token operator">=</span> <span class="token operator">&lt;</span>js files included on html page<span class="token operator">></span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token comment">// "allow everything through except ps-which"</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token string">'!ps-which.js'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">minify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><h3>browserify</h3><p>The lazy way is to have browserify <a href="https://github.com/substack/browserify-handbook#ignoring-and-excluding">ignore</a> ps-which, turning its export into <code>{}</code>, essentially a no-op. Since ps-which's export is not useful (ps-which is <em>always</em> accessed via global variable), no app code should be using it and ignoring it should be fine.</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">$ browserify app.js --ignore ps-which</span></code></pre><p>A non-lazy way could be using <a href="https://www.npmjs.com/package/envify">envify</a> with <a href="https://www.npmjs.com/package/unreachable-branch-transform">unreachable-branch-transform</a> to completely remove <code>require('ps-which')</code> from the code before browserify makes the bundle.</p></section></article></div></main><footer class="p-8 text-center text-sm border-t-2 border-gray-200"><span>Â©2019 Paul Salaets</span><br><span>Built with <a href="https://www.11ty.io/" rel="noopener noreferrer" class="text-blue-700 underline">Eleventy</a> and <a href="https://tailwindcss.com/" rel="noopener noreferrer" class="text-blue-700 underline">Tailwind CSS</a></span></footer></body></html>