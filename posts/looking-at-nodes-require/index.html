<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="description" content="Exploring various ways to load files using require."><link rel="stylesheet" href="/1.14.0/main.css"><link rel="canonical" href="https://paulsalaets.com/"><title>Looking at node&#39;s require() | paulsalaets.com</title></head><body class="text-base font-sans text-gray-900"><header class="p-4 mx-auto sm:max-w-3xl sm:px-20"><a href="#main" class="skipnav">skip to main content</a><nav><a class="font-bold text-sm sm:text-base inline-block mr-3" href="/" title="Home">Paul Salaets </a><a class="px-3 py-2" href="/" title="Home"><span class="text-sm sm:text-base inline-block">Home </span></a><a class="px-3 py-2" href="/about" title="About"><span class="text-sm sm:text-base inline-block">About </span></a><a class="px-3 py-2" href="/archive" title="Archive"><span class="text-sm sm:text-base inline-block">Archive</span></a></nav></header><main id="main" class="pb-4"><div class="mx-auto bg-white p-4 sm:max-w-3xl sm:px-20"><article><header class="mb-8"><h1 class="text-3xl font-bold">Looking at node&#39;s require()</h1><span class="text-sm">9 Aug 2015</span></header><section class="post-content"><p>Exploring various ways to load files using <code>require()</code>.</p><p><strong>Versions used below</strong></p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">node 0.10.36</span></code></pre><h2>Common usages</h2><p>If you've used node before these are familiar.</p><h3>Core Module</h3><p>Load one of node's <a href="https://nodejs.org/api/index.html">built-in modules</a>.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><h3>Dependency from npm</h3><p>Load something that's in <code>node_modules/</code>, which was most likely installed via <a href="https://www.npmjs.com/">npm</a>.</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">$ <span class="token function">npm</span> <span class="token function">install</span> faye -S</span></code></pre><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">var</span> faye <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'faye'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><h3>Relative path</h3><p>Load a file relative to the current file.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">var</span> helper <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./util/helper.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>The file extension is optional.</p><h3>Absolute path</h3><p>I've never used this but it's possible to load files with an absolute path.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">var</span> helper <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'/Users/paul/js/helper.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>Again, the file extension is optional.</p><h2>Other usages</h2><h3>Directory</h3><p>Given this directory structure</p><pre>
├── stuff/
│   ├── foo.js
│   ├── bar.js
│   └── index.js
└── main.js
</pre><p>In <code>main.js</code> you could</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">var</span> stuff <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./stuff'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>and it'd load <code>./stuff/index.js</code>.</p><p><code>index.js</code> can require the other files in <code>stuff/</code>. This is handy for making a directory sort of act as an embedded module.</p><p>One benefit to omitting the file extension in relative path requires is that you can break a large file down into a directory of smaller files without having to update all the <code>require</code> calls.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token comment">// this code doesn't know if it's getting ./stuff.js or ./stuff/index.js</span></span><br><span class="highlight-line"><span class="token keyword">var</span> stuff <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./stuff'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><h3>Json file</h3><p>When you require a json file you get the parse result.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token string">"colors"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"green"</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">]</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./data.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>colors<span class="token punctuation">;</span></span></code></pre><h3>Any file from a dependency</h3><p>If you're okay with relying on a module's internal file structure, you can require any file from it.</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">$ <span class="token function">npm</span> <span class="token function">install</span> <span class="token operator">&lt;</span>module<span class="token operator">></span> -S</span></code></pre><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">var</span> something <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'&lt;module>/lib/something'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>This allows you to programmatically determine a module's version.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">var</span> gulpVersion <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp/package.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>version<span class="token punctuation">;</span></span></code></pre></section></article></div></main><footer class="p-8 text-center text-sm border-t-2 border-gray-200"><span>©2019 Paul Salaets</span><br><span>Built with <a href="https://www.11ty.io/" rel="noopener noreferrer" class="text-blue-700 underline">Eleventy</a> and <a href="https://tailwindcss.com/" rel="noopener noreferrer" class="text-blue-700 underline">Tailwind CSS</a></span></footer></body></html>