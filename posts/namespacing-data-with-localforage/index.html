<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="description" content="I run multiple static web apps at the same domain, so their offline storage is in the same bucket. Luckily localForage has a way to keep the data separated."><style>.svg-inline--fa {
      display: none;
    }</style><link rel="stylesheet" href="/styles/1.29.0/index.css"><link rel="canonical" href="https://paulsalaets.com/"><link rel="alternate" type="application/rss+xml" title="Subscribe to posts" href="/feed.xml"><title>Namespacing data with localForage | paulsalaets.com</title></head><body class="text-base font-sans text-gray-900"><header class="p-4 mx-auto sm:max-w-3xl sm:px-20"><a href="#main" class="skipnav">skip to main content</a><nav><a class="font-bold text-sm sm:text-base inline-block mr-3" href="/" title="Home">Paul Salaets </a><a class="px-3 py-2" href="/" title="Home"><span class="text-sm sm:text-base inline-block">Home </span></a><a class="px-3 py-2" href="/about" title="About"><span class="text-sm sm:text-base inline-block">About </span></a><a class="px-3 py-2" href="/archive" title="Archive"><span class="text-sm sm:text-base inline-block">Archive </span></a><a class="px-3 py-2" href="/feed.xml" title="Feed"><span class="sr-only">RSS Feed</span> <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg></a></nav></header><main id="main" class="pb-4"><div class="mx-auto bg-white p-4 sm:max-w-3xl sm:px-20"><article><header class="mb-8"><h1 class="text-3xl font-bold">Namespacing data with localForage</h1><span class="text-sm">23 Feb 2015</span></header><section class="post-content"><p>Through the magic of GitHub Pages I've got multiple static web apps hosted at the same domain. That means offline storage (IndexedDB, WebSQL, LocalStorage) for these apps is in the same bucket. Luckily localForage provides a way to keep the data separated.</p><p><strong>Versions used below</strong></p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token string">"localforage"</span><span class="token punctuation">:</span> <span class="token string">"1.2.2"</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Edited on 27 Feb 2015: Previously I said you need to set <code>name</code> <em>and</em> <code>storeName</code> but actually only <code>name</code> is required for namespacing data.</p><h2>Set a custom name</h2><p>Override the <a href="http://mozilla.github.io/localForage/#config" rel="noopener">default config</a> by calling <code>localforage.config()</code>. This <em>must</em> be done before any <a href="http://mozilla.github.io/localForage/#data-api" rel="noopener">data API methods</a> are called.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line">localforage<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  name<span class="token punctuation">:</span> <span class="token string">'My App'</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>The value for <code>name</code> should be unique across all other localForage instances on the domain. The value can be anything reasonable, I usually use my app's name.</p><p>If you just need to keep your app's localForage data separate from other apps on the same domain, you're done.</p><h2>Creating multiple instances of localForage</h2><p>Since 0.9.3 you can make more localForage instances using <code>localforage.createInstance()</code>. The <a href="http://mozilla.github.io/localForage/#config" rel="noopener">options</a> accepted by <code>localforage.config()</code> are also accepted here.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">var</span> otherStore <span class="token operator">=</span> localforage<span class="token punctuation">.</span><span class="token function">createInstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  name<span class="token punctuation">:</span> <span class="token string">'Other Store'</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>At this point you'd have two localForage instances: <code>localforage</code> and <code>otherStore</code>.</p><h2>Full example with multiple instances</h2><p>I use native <code>Promise</code> below so it works without polyfills in <a href="http://caniuse.com/#feat=promises" rel="noopener">anything but IE</a>.</p><pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">var</span> store1 <span class="token operator">=</span> localforage<span class="token punctuation">.</span><span class="token function">createInstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  name<span class="token punctuation">:</span> <span class="token string">'Store 1'</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">var</span> store2 <span class="token operator">=</span> localforage<span class="token punctuation">.</span><span class="token function">createInstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  name<span class="token punctuation">:</span> <span class="token string">'Store 2'</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">var</span> key <span class="token operator">=</span> <span class="token string">'key'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// set value in each store using same key (but they're namespaced so it's all good)</span></span><br><span class="highlight-line">Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span><br><span class="highlight-line">  store1<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">'value1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  store2<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">'value2'</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token comment">// now get values</span></span><br><span class="highlight-line">  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span><br><span class="highlight-line">    store1<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    store2<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'value from store1 is '</span> <span class="token operator">+</span> values<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'value from store2 is '</span> <span class="token operator">+</span> values<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>will print</p><pre class="language-text"><code class="language-text"><span class="highlight-line">value from store1 is value1</span><br><span class="highlight-line">value from store2 is value2</span></code></pre></section></article></div></main><footer class="p-8 text-center text-sm border-t-2 border-gray-200"><span>©2019 Paul Salaets</span><br><span>Built with <a href="https://www.11ty.io/" rel="noopener" class="text-blue-700 underline">Eleventy</a> and <a href="https://tailwindcss.com/" rel="noopener" class="text-blue-700 underline">Tailwind CSS</a></span></footer></body></html>